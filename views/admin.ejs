<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civic-Watch</title>
    <link href="/stylesheets/output.css" rel="stylesheet">
</head>
<body class="bg-verde-claro font-display text-bege">

  <main class="flex justify-center">

    <!-- Seção Lateral Esquerda -->
    <div class="bg-verde-claro w-[25%] h-[100vh] fixed left-0 border-r-[.1px] border-marrom">

        <!-- Logo -->
        <div class="pt-[1rem] pl-[5rem]">

        <img src="/images/logo.svg" alt="Logo do Civic Watch" class="size-40">

        </div>

        <!-- Botões -->
        <li class="list-none flex flex-col mt-[5rem] bg-verde-escuro border-t-[.1px] border-marrom">

        <button class="flex items-center justify-items-start px-[5rem] py-[2rem] gap-[2rem] border-b-[.1px] border-marrom hover:bg-verde-claro hover:cursor-pointer" id="pagina-inicial">

          <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house text-bege"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>

          <p>Página Inicial</p>

        </button>

        <button class="flex items-center justify-items-start px-[5rem] py-[2rem] gap-[2rem] border-b-[.1px] border-marrom hover:bg-verde-claro hover:cursor-pointer" id="favoritos">

          <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-icon lucide-heart text-bege"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
          <p>Favoritos</p>

        </button>

        <button class="flex items-center justify-items-start px-[5rem] py-[2rem] gap-[2rem] border-b-[.1px] border-marrom hover:bg-verde-claro hover:cursor-pointer" id="perfil">

          <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-icon lucide-user text-bege"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>

          <p>Perfil</p>

        </button>

        <button class="flex items-center justify-items-start px-[5rem] py-[2rem] gap-[2rem] border-b-[.1px] border-marrom hover:bg-verde-claro hover:cursor-pointer" id="pesquisar">

          <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search text-bege"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>

          <p>Explorar</p>

        </button>

        <% if (tipo === 'admin') { %>

        <button class="flex items-center justify-items-start px-[5rem] py-[2rem] gap-[2rem] border-b-[.1px] border-marrom hover:bg-verde-claro hover:cursor-pointer" id="admin">

          <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-icon lucide-shield text-bege"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>

          <p>Admin</p>

        </button>
        <% } %>

        </li>

    </div>

    <div class="bg-verde-escuro grow min-h-[100vh] pl-[25%] text-center">

      <div class="bg-verde-escuro">

        <h1 class="text-5xl font-bold pt-[5rem] pb-[1rem]">Administração</h1>

      </div>

      <% if (aba === 'cadastro') { %>

        <div class="flex w-full justify-between border-b-[.1px] border-marrom">

          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="dashboard" name="botao-aba">Dashboard</button>
          <button class="bg-verde-claro text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="cadastro" name="botao-aba">Cadastro</button>
          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full" id="moderacao" name="botao-aba">Moderação</button>

        </div>

        <div class="flex justify-between border-b-[.1px] border-marrom">
          <button class="bg-verde-claro w-full py-[1rem] border-r-[.1px] border-marrom hover:cursor-pointer" id="politico">Perfil Político</button>
          <button class="w-full py-[1rem] hover:cursor-pointer" id="categoria">Categoria de Político</button>
        </div>
        <form id="auth-form" method="POST" action="/cadastro/politico" class="w-full flex flex-col items-center gap-[1.5rem] p-[2rem]">
            <h2 class="font-bold text-2xl" id="form-title">Crie um perfil político</h2>
            <input class="bg-bege text-black p-[1rem] border-none rounded-md w-[40%]" type="text" id="nome" name="nome" placeholder="Nome" required>
            <input class="bg-bege text-black p-[1rem] border-none rounded-md w-[40%]" type="text" id="partido" name="partido" placeholder="Partido" required>
            <input class="bg-bege text-black p-[1rem] border-none rounded-md w-[40%]" type="text" id="estado" name="estado" placeholder="Estado(Sigla)" required>
            <input class="bg-bege text-black p-[1rem] border-none rounded-md w-[40%]" type="text" id="municipio" name="municipio" placeholder="Município" required>
            <input class="hidden" type="text" id="" name="categoria" required>
            <div class="flex flex-col w-[40%] text-left gap-[1.5rem]">
              <p class="font-bold text-2xl" id="categoriaTitulo">Categoria: </p>

              <% categorias.forEach(c => { %>

              <button class="w-full py-[.5rem] border-b-[.1px] border-t-[.1px] border-marrom hover:cursor-pointer" name="categoriaButton" id="<%= c.id %>"><%= c.nome %></button>

              <% }); %>
              
            </div>
            <button class="p-[1rem] font-medium bg-marrom border-none rounded-md text-bege uppercase hover:cursor-pointer" type="submit" id="submitButton">Criar Político</button>
        </form>

      <% } else if (aba === 'moderacao') { %>

        <div class="flex w-full justify-between border-b-[.1px] border-marrom">

          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="dashboard" name="botao-aba">Dashboard</button>
          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="cadastro" name="botao-aba">Cadastro</button>
          <button class="bg-verde-claro text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full" id="moderacao" name="botao-aba">Moderação</button>

        </div>

        <form id="buscaPerfilForm" method="GET" action="/admin/moderacao" class="w-full flex items-center gap-[1.5rem] p-[2rem] border-b-[.1px] border-marrom">
            <input class="bg-bege text-black p-[1rem] border-none rounded-md w-full" type="text" id="busca" name="busca" placeholder="Pesquise por nome" required>
            <button class="p-[1rem] font-medium bg-marrom border-none rounded-md text-bege uppercase hover:cursor-pointer" type="submit" id="submitButton">Pesquisar</button>
        </form>

        <% perfis.forEach(p => { %>

          <% if (p.tipo === 'usuario') { %>

            <% if (busca) { %>

              <% if (p.name.includes(busca)) { %>

            <!-- Perfil -->
            <div class="bg-verde-claro flex items-center justify-between p-[2rem] border-b-[.1px] border-marrom">
     
              <div class="flex items-center">

                <!-- Foto de Perfil -->
                <svg xmlns="http://www.w3.org/2000/svg" width="5rem" height="5rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-user-icon lucide-circle-user shrink-0"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>
     
                <!-- Conteúdo -->
                <div class="flex flex-col pl-[1rem] text-left gap-[1rem]">
     
                    <!-- Usuário-->
                    <div class="flex flex-col gap-[.5rem]">
     
                    <h2 class=""><%= p.name %></h2>
                    <p><%= p.email %></p>
     
                   </div>
                   
                </div>
                
              </div>

              <button id="<%= p.id %>" name="excluirPerfil">

                <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2-icon lucide-trash-2 text-bege"><path d="M10 11v6"/><path d="M14 11v6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>

              </button>
     
            </div>

            <% } %>

          <% } else { %>

             <!-- Perfil -->
            <div class="bg-verde-claro flex items-center justify-between p-[2rem] border-b-[.1px] border-marrom">
     
              <div class="flex items-center">

                <!-- Foto de Perfil -->
                <svg xmlns="http://www.w3.org/2000/svg" width="5rem" height="5rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-user-icon lucide-circle-user shrink-0"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>
     
                <!-- Conteúdo -->
                <div class="flex flex-col pl-[1rem] text-left gap-[1rem]">
     
                    <!-- Usuário-->
                    <div class="flex flex-col gap-[.5rem]">
     
                    <h2 class=""><%= p.name %></h2>
                    <p><%= p.email %></p>
     
                   </div>
                   
                </div>
                
              </div>

              <button id="<%= p.id %>" name="excluirPerfil">

                <svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2-icon lucide-trash-2 text-bege"><path d="M10 11v6"/><path d="M14 11v6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>

              </button>
     
            </div>

          <% } %>

        <% } %>

        <% }); %>

      <% } else { %>

        <div class="flex w-full justify-between border-b-[.1px] border-marrom">

          <button class="bg-verde-claro text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="dashboard" name="botao-aba">Dashboard</button>
          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full border-r-[.1px] border-marrom" id="cadastro" name="botao-aba">Cadastro</button>
          <button class="text-2xl flex justify-center hover:cursor-pointer py-[1rem] text-center w-full" id="moderacao" name="botao-aba">Moderação</button>

        </div>

        <p>Total de usuários: <%= dashboard.totalUsuarios %></p>
        <p>Total de propostas: <%= dashboard.totalPropostas %></p>
        <p>Total de avaliações: <%= dashboard.totalAvaliacoes %></p>
        <p>Total de favoritos: <%= dashboard.totalFavoritos %></p>

      <% } %>

    </div> 

  </main>

  <script src="/javascripts/secao_lateral.js"></script>
  <script src="/javascripts/admin.js"></script>
  <script src="/javascripts/cadastro.js"></script>

</body>
</html>